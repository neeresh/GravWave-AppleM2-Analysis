# Binary Black Hole (BBH) Benchmarking on Mac Pro M2

## File Purpose


**`download_template_bank.sh`**: This file is used to download the `bbh.hdf` bank file.


**`create_data.sh`**: This script generates a gravitational wave strain data file using the `pycbc_condition_strain` command with specified parameters, including frame type, sample rate, padding, autogating settings, strain high-pass filter, channel name, and specific start and end times. The resulting strain data is saved to a file named `DATA_FILE.gwf`.


**`cprofile_run_file_arguments.sh`**: This bash file, designed to automatically execute the entire analysis, iterates through specified combinations of script files, backends, thread counts, and threading types, running each combination and recording the real execution times in `execution_times.txt`.


**`run_data_length_factor_by_8.sh`**: The `run_data_length_factor_by_8.sh` script is a modified version of run.sh, extending the analysis time by a factor of 8 from the original duration and incorporating three extra arguments from `cprofile_run_file_arguments.sh`: namely, the file name, backends, thread counts, and threading types.


**`move_outputs.sh`**: This file is used to move the generated output files from the analysis to the `benchmarking_outputs/dot_out_files` directory.


**`move_logs.sh`**: This file is used to move the generated log files from the analysis to the `logs` folder. (**`Note`**: Please create a `logs` folder before performing analysis, my logs were not uploaded here because the folder size is around 678.8 MB).


**`executions_times.txt`**: Documentation capturing the time taken for the execution of each combination involving pairs of script files, backends, thread counts, and threading types.


**`print_cases.sh`**: Prints all the files that are going to execute in the script `**cprofile_run_file_arguments.sh**`.


**`benchmarking_outputs`**: This directory contains all the .out files generated by `run_data_length_factor_by_8.sh` for each combination specified in `cprofile_run_file_arguments.sh`.


**`benchmarking_outputs/get_pngs.sh`**: This script automates the conversion of performance profiling output files `.out` to Graphviz DOT files `.dot`. Additionally, it transforms these DOT files into `PNG images`, organizing the resulting files into designated directories: `dot_out_files/` and `dot_dot_files/`.


**`benchmarking_outputs/clean.sh`**: This file consists of a single command which removes all files in the `dot_out_files/` and `dot_dot_files/` directories.

## Execution Order

#### Getting the data

To obtain the necessary Black Hole Binary (BBH) bank file for this analysis, execute the script `download_template_bank.sh`.

```
bash download_template_bank.sh
```

#### Generating strain data

To generate strain data, execute the following command:

```
bash create_data.sh
```

#### Running Inspiral Analysis for Every Combination

Execute the following command to run the inspiral analysis for every combination:

```
bash cprofile_run_file_arguments.sh
```

#### Generating pngs files

cd into `benchmarking_outputs`

```
cd benchmarking_outputs
```

Execute the following command to generate pngs for benchmarking the results

```
bash get_pngs.sh
```

**`Note`**: Make sure to create both the following directories `dot_dot_files` and `dot_out_files` before performing the above command.
